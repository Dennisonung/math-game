<!DOCTYPE html>
<html>

<head>

    <title>bepic math game || DDC</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css?family=Montserrat:500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/index.css">
    <link href="https://fonts.googleapis.com/css?family=Montserrat:500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://ddc.gg/res/css/Bootstrap.min.css">
    <link rel="stylesheet" href="https://ddc.gg/res/css/style.css">
    <link rel="stylesheet" href="https://ddc.gg/res/css/ScuffedFrame.css">
    <link rel="stylesheet" href="https://ddc.gg/res/css/animate.css">
    <link rel="stylesheet" href="/index.css">
    <link rel="stylesheet" href="https://ddc.gg/res/css/header.css">
    <link rel="stylesheet" href="https://ddc.gg/res/css/navbar.css">
    <link rel="stylesheet" href="https://ddc.gg/res/css/DDCFrameWork/Header.css">
    <link rel="stylesheet" href="https://ddc.gg/res/css/DDCFrameWork/Footer.css">
    <link rel="stylesheet" href="https://ddc.gg/res/css/DDCFrameWork/Extras.css">
    <script src="https://ddc.gg/res/js/index.js"></script>
    <script src="/socket.io/socket.io.js"> </script>
    <script src="/js/jquery.js"></script>

    <navbar class="top-container">
        <a class="logo" href="https://ddc.gg/"><img class="logo-display" src="https://ddc.gg/res/img/ddclogonew.png"
                alt="logo"></a>
        <nav>
            <ul class="nav__links">
                <li><a href="https://ddc.gg/">Home</a></li>
                <li><a href="https://offs.ca/">Student Suite (OFFS.ca)</a></li>
                <li><a href="/wiki">Wiki</a></li>
            </ul>
        </nav>
        <a class="cta" href="https://ddc.gg/contact.php">Contact</a>
        <p class="menu cta">Menu</p>
    </navbar>
    <div class="overlay">
        <a class="close">&times;</a>
        <div class="overlay__content">
            <a href="https://ddc.gg/">Home</a>
            <a href="https://offs.ca/">OFFS.ca</a>
            <a href="/wiki"> Wiki</a>
        </div>
    </div>
    <script src="https://ddc.gg/res/js/mobile.js"></script>
</head>

<body>
    <div style="padding:15px"></div>
    <div id="StartLog">
        <h1>Math CO-OP Game</h1>
        <h4> by denny and johnny</h4>
        <div class="row pr-5">
            <div style="height:175px"class="col rounded ml-5 box-container-shadow">
                <h4 style="padding-top: 10px;">Join Lobby</h4>
                <input id="CODE" placeholder="Code (6 Letters)"></input>
                <div style="padding:5px"></div>
                <input id="USERNAME" placeholder="Username"></input>
                <div style="width: 100%; position: absolute; bottom: 0; right:0" class="center">
                    <a id="JoinLobby" class="btn rwhite">Join Lobby</a>
                </div>
            </div>
            <div style="height:175px" class="col rounded ml-5 box-container-shadow">
                <h4 style="padding-top: 10px;">Create Lobby</h4>
                <div style="padding:5px"></div>
                <input id="CreateLobbyUSERNAME" placeholder="Username"></input>
                <div style="width: 100%; position: absolute; bottom: 0; right:0" class="center">
                    <a id="createLobby" class="btn rwhite">Create Lobby</a>
                </div>
            </div>
        </div>
    </div>

    <div id="Part2" style="display:none">
        <h1>Game Lobby</h1>
        <h3 id="P2GameCode">ERROR</h3>
        <div class="row pr-5">
            <div style="height:100px"class="col rounded ml-5 box-container-shadow">
                <h2>Player 1</h2>
                <h4 id="P2Player1">Player 1 (Error if you see this)</h4>
            </div>
            <div style="height:100px"class="col rounded ml-5 box-container-shadow">
                <h2>Player 2</h2>
                <h4 id="P2Player2">Player 2 (Not Joined)</h4>
            </div>
        </div>
    </div>

    <div id="GameMaster" style="display: none; padding-top:15px">
        <h4>You are the Game Master</h4>
        <a id="StartGame" class="btn rwhite">Start Game</a>
    </div>

    <div id="game" style="display:none">
        <h3>Round: ERROR</h3>
    </div>
        







    <div style="padding:10%"> </div>
    <footer class="center" id="footer">
        <img alt="DF Logo" class="center" src="https://ddc.gg/res/img/logowide-clear.png" style="width: 33%;">
        <h5 class="FootText">Dennisonung's Development Center - <a href="https://ddc.gg/policies.php">Privacy Policy</a>
            - This website is still a work in progress.</h5>
    </footer>

    <script>
        $(function () {
            $.ajaxSetup({
                cache: false
            });
            // on click, load the data dynamically into the #result div
            // $("#loadbasic").click(function() {
            //     $("#result").html(spinner).load(url);
            // });
        });
    </script>

    <script>
        // $("#InputCode").onkeypress = function(e) {
        //     var chr = String.fromCharCode(e.which);
        //     if ("></\"".indexOf(chr) >= 0)
        //         return false;
        // };
        // $("#InputUsername").onkeypress = function(e) {
        //     var chr = String.fromCharCode(e.which);
        //     if ("></\"".indexOf(chr) >= 0)
        //         return false;
        // };
        // $("#CreateGame").click(function() {
        //     var epicCode = $("#InputCode").val();
        //     var username = $("#InputUsername").val();
        //     $.ajax({
        //         url: "CreateGame.php",
        //         data: {
        //             code: epicCode,
        //             username: username
        //         },
        //         success: function(result) {
        //             $("#result").html(result);
        //         }
        //     });
        // });
    </script>
    <script>
        var socket = io("ws://10.117.161.84:8085");


        $("#createLobby").click(function () {
            var username = $("#CreateLobbyUSERNAME").val();
            if (username == "") {
                alert("Please enter a username");
                return;
            } else {
                var GameInfo = {
                    username: username
                };
                socket.emit("CreateGameLobby", GameInfo);
            }

        });
        
        $("#JoinLobby").click(function () {
            if ($("#CODE").val() == "" || $("#USERNAME").val() == "") {
                alert("Please fill in all fields");
            } else {
                console.log("JoinLobby");
                socket.emit("JoinGameLobby", {
                    Code: $("#CODE").val(),
                    username: $("#USERNAME").val()
                });
            }
        });

        $("#StartGame").click(function () {
            socket.emit("StartGame", {
                gameCode: $("#P2GameCode").text()
            });
        });

        socket.on("JoinedGameLobby", function (data) {  
            $("#StartLog").fadeOut();
            $("#Part2").fadeIn();
            $("#P2GameCode").html(data.gameCode);
            $("#P2Player1").html(data.Player1);
            $("#P2Player2").html(data.Player2);
        })

        socket.on("CreatedGameLobby", function (data) {
            $("#StartLog").fadeOut();
            $("#Part2").fadeIn();
            $("#P2GameCode").html("Game Code: " + data.gameCode);
            $("#P2Player1").html(data.Player1);
            $("#P2Player2").html("Waiting for Player 2");
        })

        socket.on("GameMaster", function (data) {
            $("#GameMaster").fadeIn();
        })

        socket.on("StartGameSuccess", function (data) {
            $("#GameMaster").fadeOut();
            $("#Part2").fadeOut();
            $("#game").fadeIn();
        })


        socket.on("FullGame", function (data) {
            alert("Game is full");
        });
        socket.on("Error" , function(data){
            alert(data);
        });

    </script>
</body>

</html>